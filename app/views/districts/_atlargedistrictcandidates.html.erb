<% if (@district.incumbent.present? && @district.incumbent.running_reelection == true) || @district.candidates.present? %>
<div class="card shadow-sm mb-3 bg-white rounded" style="max-width: 100%;">
  <div class="card-header text-uppercase">
    candidates for this office <% if @district.number_of_winners.present? && @district.number_of_winners > 1 %><%= "(Top #{@district.number_of_winners} Win)" %><%end%>
  </div>
  <div class="card-text pl-4 pr-4">
  <div class="table-responsive">
    <table class="table">
      <thead>
        <tr>
        <th></th>
        <th></th>
        <th>Candidate</th>
        <th class="d-none d-sm-block ">Status</th>
        <tr>
      </thead>

      <tbody>
      <tr>
        <% @district.jurisdiction.incumbents.where(:running_reelection => true).each do |incumbent| %>
        <% if incumbent.incumbent_district.term_expires.to_s == "2020" && incumbent.incumbent_district.at_large_district? %>
        <% report = incumbent.reports.most_recent %>
        <td class="condensed-column  pt-4 pb-0">
          <% if incumbent.endorsed_republican? %>
          <div class=""><span class="gop-text"><%= material_icon.check_circle %></div>
          <%elsif incumbent.endorsed_democrat?%>
          <div class=""><span class="dem-text"><%= material_icon.check_circle %></div>
          <%else%>
          <%end%>
          </td>
          <td class="condensed-column"><%= image_tag incumbent.image.url(:headshot), alt: 'headshot', :class => "avatar shadow-sm", size: "45x45"  %></td>
        <td>
          <% if incumbent.party == "Republican" %>
          <%= link_to "#{incumbent.first_name} #{incumbent.last_name}", incumbent, { :class =>"gop-text" }%><br><small><%= incumbent.title %></small>
          <%elsif incumbent.party == "Democrat"%>
          <%= link_to "#{incumbent.first_name} #{incumbent.last_name}", incumbent, { :class =>"dem-text" }%><br><small><%= incumbent.title %></small>
          <%else%>
          <%= link_to "#{incumbent.first_name} #{incumbent.last_name}", incumbent, { :class =>"dts-text" }%><br><small><%= incumbent.title %></small>
          <%end%></td>
          <td class="d-none d-sm-block ">
          <% if incumbent.ballot_status == "Advanced to General"%>
          <h6 class="advanced-general container text-center text-md-left" style="display: inline;"><%= incumbent.ballot_status%></h6>
          <%elsif incumbent.ballot_status == "Lost in Primary"%>
          <h6 class="lost-primary text-center text-md-left" style="display: inline;"><%= incumbent.ballot_status%></h6>
          <%elsif incumbent.ballot_status == "Rumored"%>
          <h6 class="rumored-candidate text-center text-md-left" style="display: inline;"><%= incumbent.ballot_status%></h6>
          <%elsif incumbent.ballot_status == "Declared Candidacy"%>
          <h6 class="declared-candidacy text-center text-md-left" style="display: inline;"><%= incumbent.ballot_status%></h6>
          <%elsif incumbent.ballot_status == "On Ballot"%>
          <h6 class="on-ballot text-center text-md-left" style="display: inline;"><%= incumbent.ballot_status%></h6>
          <%elsif incumbent.ballot_status == "Withdrew"%>
          <h6 class="withdrew text-center text-md-left" style="display: inline;"><%= incumbent.ballot_status%></h6>
          <%end%>
          </td>
      </tr>
      <%end%>
      <%end%>
       <% @district.jurisdiction.candidates.each do |candidate| %>
      <% if candidate.district.term_expires.to_s == "2020" && candidate.district.at_large_district? %>
      <tr>
        <% if candidate.on_ballot? %>
          <% report = candidate.reports.most_recent %>
          
          <td class="condensed-column pt-4 pb-0">
          <% if candidate.endorsed_republican? %>
          <div class=""><span class="gop-text"><%= material_icon.check_circle %></div>
          <%elsif candidate.endorsed_democrat?%>
          <div class=""><span class="dem-text"><%= material_icon.check_circle %></div>
          <%else%>
          <%end%>
          </td>
          <td class="condensed-column"><%= image_tag candidate.image.url(:headshot), alt: 'headshot', :class => "avatar img-fluid shadow-sm", size: "45x45"  %></td>
          <td>
          <% if candidate.party == "Republican" %>
          <%= link_to "#{candidate.first_name} #{candidate.last_name}", candidate, { :class =>"gop-text" }%><br><small><% if candidate.is_incumbent? %><%= candidate.title %><%else%><%=candidate.professional_career %><%end%></small>
          <%elsif candidate.party == "Democrat"%>
          <%= link_to "#{candidate.first_name} #{candidate.last_name}", candidate, { :class =>"dem-text" }%><br><small><% if candidate.is_incumbent? %><%= candidate.title %><%else%><%=candidate.professional_career %><%end%></small>
          <%else%>
          <%end%></td>
          <td class="d-none d-sm-block">
          <% if candidate.ballot_status == "Advanced to General"%>
          <h6 class="advanced-general container text-center text-md-left" style="display: inline;"><%= candidate.ballot_status%></h6>
          <%elsif candidate.ballot_status == "Lost in Primary"%>
          <h6 class="lost-primary text-center text-md-left" style="display: inline;"><%= candidate.ballot_status%></h6>
          <%elsif candidate.ballot_status == "Rumored"%>
          <h6 class="rumored-candidate text-center text-md-left" style="display: inline;"><%= candidate.ballot_status%></h6>
          <%elsif candidate.ballot_status == "Declared Candidacy"%>
          <h6 class="declared-candidacy text-center text-md-left" style="display: inline;"><%= candidate.ballot_status%></h6>
          <%elsif candidate.ballot_status == "On Ballot"%>
          <h6 class="on-ballot text-center text-md-left" style="display: inline;"><%= candidate.ballot_status%></h6>
          <%elsif candidate.ballot_status == "Withdrew"%>
          <h6 class="withdrew" style="display: inline;"><%= candidate.ballot_status%></h6>
          <%end%>
          </td>
          <% end %>
          <% end %>
          
      </tr>    
      <%end%>
      <small class="text-muted">Checkmark = Party Endorsement</small>
      </tbody>
      </div>
      </table>
    </div>
  </div>
  </div>
  <%end%>
