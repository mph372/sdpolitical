<p id="notice"><%= notice %></p>
<% if user_signed_in? %>
<h1>Committees</h1>
<br>
<table class="table small-table table-bordered table-sm table-hover" id="committees">
  <thead class="thead-light">
    <tr>
      <th>Name</th>
      <th>Jurisdiction</th>
      <th>Type</th>
      <th>Candidate or Measure</th>
      <th>Support</th>
    </tr>
  </thead>

  <tbody>
    <% @committees.each do |committee| %>
      <tr>
        <td><%= link_to "#{committee.name}", committee %></td>
        <td><%= link_to "#{committee.jurisdiction.name}", committee.jurisdiction %></td>
        <td><%= committee.committee_type %></td>
        <td> <% if committee.person.present? %>
            <%= link_to "#{committee.person.first_name} #{committee.person.last_name}", committee.person %>
            <%elsif committee.measure.present? %>
            <%= link_to "Measure #{committee.measure.letter}", committee.measure %>
            <%else%>
            <%end%>
        </td>
        <td><%= committee.support %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>
<% if current_user.admin? %>
<%= link_to 'New Committee', new_committee_path %>
<%end%>    
<%else %>
  <p>Please Sign Up or Sign In to view the content.</p>
  <%= link_to 'Sign up', new_user_registration_path %><br>
  <%= link_to 'Sign in', new_user_session_path %>
<% end %>
<script>
    $( document ).on('turbolinks:load', function() {
    $('#committees').DataTable( {
      retrieve: true
    });
});
</script>